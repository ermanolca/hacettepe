@model Hacettepe.Application.Listing.DatatableResponse<Hacettepe.Application.Users.List.UserDto>
@{
    ViewBag.Title = "Denetim Günlükleri";
}
<div class="row">
    <table id="auditsGrid" class="table table-striped table-bordered dt-responsive nowrap">
        <thead>
        <tr>
            <th>Kullanıcı</th>
            <th>İşlem</th>
            <th>Tablo</th>
            <th>Tarih</th>
            <th>Eski D.</th>
            <th>Yeni D.</th>
            <th>Etkilenen Kolonlar</th>
            <th>Kayıt Id</th>
        </tr>
        </thead>
    </table>
</div>

@section scripts
{
    <script src="/lib/DataTables/datatables.min.js"></script>
    
    <script type="text/javascript">
    
        $('#auditsGrid').dataTable({
           "language" : {
               url: 'https://cdn.datatables.net/plug-ins/2.1.3/i18n/tr.json',
           },
            "processing": true,
            "serverSide": true,
            "filter": true, // this is for disable filter (search box)
            "orderMulti": true, // for disable multiple column at once
            "pageLength": 10,   
            "stateSave": true,     
            "ajax": {
                "url": "/admin/audits/list",
                "type": "POST",
                "datatype": "json"
            },
            "columnDefs":[
            {
                "targets": [0],
                "searchable": false,
                "orderable": false
            },
            {
                "targets": [1],
                "searchable": false,
                "orderable": false
            },
            {
                "targets": [2],
                "searchable": false,
                "orderable": false
            },
            {
                "targets": [3],
                "searchable": false,
                "orderable": false
            },
            {
                "targets": [4],
                "searchable": false,
                "orderable": false
            },
            {
                "targets": [5],
                "searchable": false,
                "orderable": false
            },{
                "targets": [6],
                "searchable": false,
                "orderable": false
            },
            {
                "targets": [7],
                "searchable": false,
                "orderable": false
            }],
            "columns": [
                { "data": "user", "title": "Kullanıcı", "name": "user", "autoWidth": true },
                { "data": "type", "title": "İşlem", "name": "type", "autoWidth": true },
                { "data": "tableName", "title": "Tablo", "name": "tableName", "autoWidth": true },
                { "data": "occurrenceDateTime", "title": "Tarih", "name": "occurrenceDateTime", "autoWidth": true },
                { "data": "oldValues", "title": "Eski D.", "name": "oldValues", "autoWidth": true },
                { "data": "newValues", "title": "Yeni D.", "name": "newValues", "autoWidth": true },
                { "data": "affectedColumns", "title": "Etkilenen Kolonlar", "name": "affectedColumns", "autoWidth": true },
                { "data": "primaryKey", "title": "Kayıt Id", "name": "primaryKey", "autoWidth": true },
                
            ]
        });
        
    </script>
}
